<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Transkrip Nilai Kelas 5</title>
  <style>
    body { font-family: Arial, sans-serif; background:#f5f7fa; margin:0; padding:0; }
    .wrap { min-height:100vh; display:flex; justify-content:center; align-items:center; padding:30px 12px; box-sizing:border-box; }
    .container { width:100%; max-width:720px; border-radius:12px; padding:22px; box-sizing:border-box; }
    h2 { color:#00796b; margin:0 0 6px 0; }
    p.subtitle { color:#00796b; font-weight:700; margin:0 0 18px 0; }
    input { width:100%; padding:10px 12px; margin:6px 0; border:1px solid #d0d0d0; border-radius:8px; font-size:14px; box-sizing:border-box; }
    button { padding:10px 16px; border-radius:8px; border:none; background:#00796b; color:#fff; font-size:14px; cursor:pointer; }
    button:hover { background:#005b49; }
    .hidden { display:none; }
    .judul-nilai { text-align:center; background:#00796b; color:#fff; padding:8px; border-radius:6px; margin:12px 0 10px 0; font-size:15px; }
    table { width:100%; border-collapse:collapse; margin-top:8px; }
    th,td { border:1px solid #ddd; padding:8px; text-align:center; font-size:14px; }
    th { background:#00796b; color:#fff; font-weight:700; }
    .wali { text-align:left; font-weight:700; font-size:13px; color:#333; margin-top:16px; }
    .tombol-area { display:flex; gap:8px; justify-content:flex-end; margin-top:12px; }
    /* Area cetak A4 */
    #captureArea {
      background: #fff;
      width: 210mm;
      min-height: 297mm;
      padding: 20mm;
      box-sizing: border-box;
      margin:auto;
    }
  </style>
</head>
<body>
<div class="wrap">
  <!-- Login -->
  <div id="loginForm" class="container">
    <h2>Transkrip Nilai</h2>
    <p class="subtitle">KELAS 5 SDN PENGKOL</p>
    <input type="text" id="nama" placeholder="Masukkan Nama">
    <input type="text" id="nisn" placeholder="Masukkan NISN">
    <button onclick="lihatTranskrip()">Lihat Nilai</button>
    <p id="error" style="color:#c0392b;"></p>
  </div>

  <!-- Hasil -->
  <div id="hasil" class="container hidden">
    <div id="captureArea">
      <p><b>Nama:</b> <span id="namaSiswa"></span></p>
      <p><b>NISN:</b> <span id="nisnSiswa"></span></p>
      <h3 class="judul-nilai">Nilai Asesmen Sumatif Akhir Lingkup Materi</h3>
      <table>
        <thead>
          <tr>
            <th>Mata Pelajaran</th><th>Nilai</th><th>Keterangan</th>
          </tr>
        </thead>
        <tbody id="nilai"></tbody>
      </table>
      <div class="wali">
        Wali Kelas V<br>
        ADITYA WAHYU WARDANA, S.Pd<br>
        NIP 199403192023211005
      </div>
    </div>
    <div class="tombol-area">
      <button style="background:#6c757d" onclick="logout()">Logout</button>
      <button onclick="cetakNilai()">Cetak Nilai</button>
    </div>
  </div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
<script>
let dataSiswa = [
  {NISN:"0145489184", nama:"Alvaro Adnan Aji Pambudi", nilai:{Pancasila:82, Indonesia:77, Matematika:80, SeniBudaya:68, IPAS:76, Jawa:82}},
  {NISN:"0141315098", nama:"Anantha Yudha Diztira", nilai:{Pancasila:76, Indonesia:82, Matematika:90, SeniBudaya:77, IPAS:77, Jawa:84}},
  {NISN:"0149017169", nama:"Arifah Yhuan Nur Azizah", nilai:{Pancasila:70, Indonesia:71, Matematika:75, SeniBudaya:65, IPAS:70, Jawa:84}},
  {NISN:"0153272128", nama:"Aurelia Gieni Lindria Putri", nilai:{Pancasila:84, Indonesia:68, Matematika:62, SeniBudaya:74, IPAS:71, Jawa:73}},
  {NISN:"0141702186", nama:"Dhafitha Nizza Nur Azizah", nilai:{Pancasila:72, Indonesia:71, Matematika:77, SeniBudaya:67, IPAS:77, Jawa:83}},
  {NISN:"0148829849", nama:"Dhian Rahmawati", nilai:{Pancasila:68, Indonesia:56, Matematika:42, SeniBudaya:74, IPAS:58, Jawa:64}},
  {NISN:"0144715419", nama:"Dimas Rasyid Faristia", nilai:{Pancasila:90, Indonesia:90, Matematika:92, SeniBudaya:85, IPAS:79, Jawa:85}},
  {NISN:"0148794981", nama:"Erfin Denu Setiawan", nilai:{Pancasila:56, Indonesia:44, Matematika:45, SeniBudaya:61, IPAS:56, Jawa:65}},
  {NISN:"0141168836", nama:"Marsya Anindya Kiera", nilai:{Pancasila:84, Indonesia:82, Matematika:82, SeniBudaya:77, IPAS:84, Jawa:88}},
  {NISN:"0154789336", nama:"Mikayla Ayuningtyas", nilai:{Pancasila:80, Indonesia:67, Matematika:80, SeniBudaya:66, IPAS:73, Jawa:84}},
  {NISN:"0142446401", nama:"Muhammad Ozil Ramadhan", nilai:{Pancasila:80, Indonesia:76, Matematika:87, SeniBudaya:68, IPAS:72, Jawa:76}},
  {NISN:"0133302359", nama:"Rhevan Nabil Yudanta", nilai:{Pancasila:96, Indonesia:93, Matematika:97, SeniBudaya:93, IPAS:94, Jawa:98}},
  {NISN:"0142309990", nama:"Ridho Wicaksono", nilai:{Pancasila:92, Indonesia:93, Matematika:93, SeniBudaya:93, IPAS:92, Jawa:98}},
  {NISN:"0144958788", nama:"Rizky Syam Dani", nilai:{Pancasila:88, Indonesia:88, Matematika:87, SeniBudaya:83, IPAS:92, Jawa:94}},
  {NISN:"0147263123", nama:"Tanca Al Verosa", nilai:{Pancasila:92, Indonesia:95, Matematika:98, SeniBudaya:91, IPAS:98, Jawa:98}}
];

function lihatTranskrip(){
  const namaInput = document.getElementById("nama").value.trim().toLowerCase().replace(/\s+/g," ");
  const nisnInput = document.getElementById("nisn").value.trim();
  const idx = dataSiswa.findIndex(s => 
    s.NISN===nisnInput && s.nama.toLowerCase().replace(/\s+/g," ")===namaInput
  );
  if(idx === -1){
    document.getElementById("error").innerText="Nama atau NISN salah!";
    return;
  }
  const siswa = dataSiswa[idx];
  document.getElementById("namaSiswa").innerText = siswa.nama;
  document.getElementById("nisnSiswa").innerText = siswa.NISN;

  let rows="";
  for(const [mapel,nilai] of Object.entries(siswa.nilai)){
    let label = (mapel==="Pancasila")?"Pendidikan Pancasila":
                (mapel==="Indonesia")?"Bahasa Indonesia":
                (mapel==="Matematika")?"Matematika":
                (mapel==="SeniBudaya")?"Seni Budaya":
                (mapel==="IPAS")?"IPAS":"Bahasa Jawa";
    let ket = nilai>=76 ? "Tuntas":"Belum Tuntas";
    rows += `<tr><td>${label}</td><td>${nilai}</td><td>${ket}</td></tr>`;
  }
  document.getElementById("nilai").innerHTML = rows;

  document.getElementById("loginForm").classList.add("hidden");
  document.getElementById("hasil").classList.remove("hidden");
  document.getElementById("error").innerText="";
}

function logout(){
  document.getElementById("hasil").classList.add("hidden");
  document.getElementById("loginForm").classList.remove("hidden");
  document.getElementById("nama").value="";
  document.getElementById("nisn").value="";
}

function cetakNilai(){
  const area = document.getElementById("captureArea");
  html2canvas(area,{scale:2,useCORS:true}).then(canvas=>{
    const link=document.createElement("a");
    link.download="nilai.png";
    link.href=canvas.toDataURL("image/png");
    link.click();
  });
}
</script>
</body>
</html>
